<!--
  ~ (C) Copyright ${year} Nuxeo SA (http://nuxeo.com/) and others.
  ~
  ~ All rights reserved. This program and the accompanying materials
  ~ are made available under the terms of the GNU Lesser General Public License
  ~ (LGPL) version 2.1 which accompanies this distribution, and is available at
  ~ http://www.gnu.org/licenses/lgpl-2.1.html
  ~
  ~ This library is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
  ~ Lesser General Public License for more details.
  -->

<div class="tag-field">
    <div ng-click="showTagList()">
        <span ng-show="selectedTags.length == 0" class="tag-field-placeholder">
            Select tags ...
        </span>
        <span class="tag-pill" ng-repeat="tag in selectedTags">
            {{tag.name}}
            <i class="fa fa-times" ng-click="removeTag(tag); $event.stopPropagation();"></i>
        </span>
        <input type="text" ng-model="searchTerm" ng-blur="hideTagList()" gh-enter="addTag(highlightedTag)">
    </div>

    <div ng-show="tagListVisible">

        <div class="drop-down">
            <div class="no-match" ng-show="availableTags.length == 0">
                No matching tags
            </div>

            <ul ng-show="availableTags.length > 0">
                <li ng-mousedown="addTag(tag)" ng-mouseover="highlight(tag)"
                    ng-class="{highlighted: highlightedTag && highlightedTag.id == tag.id}"
                    ng-repeat="tag in availableTags">{{tag.name}}</li>
            </ul>

            <div class="create-new-tag" ng-mouseover="highlight(null)" ng-mousedown="createAndUseTag()">
                Create new tag ...
            </div>
        </div>
    </div>

</div>

